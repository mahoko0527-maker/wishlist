* { box-sizing: border-box; }
html, body { height: 100%; }
body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif; color: #222; background: #fafafa; }

.app-header, .app-footer { display: flex; align-items: center; gap: 12px; padding: 12px 16px; background: #fff; border-bottom: 1px solid #eee; }
.app-footer { border-top: 1px solid #eee; border-bottom: 0; justify-content: center; }
.app-header h1 { font-size: 16px; margin: 0; font-weight: 600; }
#resetBtn { padding: 6px 10px; font-size: 14px; border: 1px solid #ddd; border-radius: 6px; background: #fff; cursor: pointer; }
#resetBtn:hover { background: #f2f2f2; }

main { display: grid; grid-template-columns: 1fr 320px; gap: 16px; padding: 16px; }
@media (max-width: 980px) { main { grid-template-columns: 1fr; } }

.map-panel { background: #fff; border: 1px solid #eee; border-radius: 10px; padding: 12px; }
.side-panel { background: #fff; border: 1px solid #eee; border-radius: 10px; padding: 12px; }

.legend { display: flex; align-items: center; gap: 12px; font-size: 13px; color: #666; margin-bottom: 8px; flex-wrap: wrap; }
.legend .swatch { display: inline-block; width: 14px; height: 14px; border-radius: 3px; border: 1px solid #ccc; vertical-align: middle; margin-right: 4px; }
.legend .swatch.base { background: #f3f3f3; }
.legend .swatch.hover { background: #cde7ff; }
.legend .swatch.selected { background: #a5d6a7; }

.map-container { width: 100%; aspect-ratio: 16/10; background: #f9f9fb; border: 1px solid #eee; border-radius: 8px; overflow: hidden; position: relative; }
.map-container svg { width: 100%; height: 100%; display: block; }

/* Base path style overrides presentation attrs (fill/stroke on paths) */
.map-container svg path {
  fill: #f3f3f3; /* overrides fill="none" from SVG as CSS wins */
  stroke: #333;
  stroke-width: 1;
  transition: fill 120ms ease, filter 120ms ease;
  cursor: pointer;
}
.map-container svg path.hovered { fill: #cde7ff; }
.map-container svg path.selected { fill: #66bb6a; }
.map-container svg path.dimmed { filter: saturate(0.2) brightness(1.05); }

.tooltip { position: absolute; pointer-events: none; background: rgba(0,0,0,0.76); color: #fff; font-size: 12px; padding: 4px 8px; border-radius: 6px; transform: translate(-50%, calc(-100% - 8px)); opacity: 0; transition: opacity 100ms ease; }
.tooltip.show { opacity: 1; }

.selected-list { list-style: none; padding: 0; margin: 8px 0 0; max-height: 60vh; overflow: auto; }
.selected-list li { border: 1px solid #eee; padding: 6px 8px; border-radius: 6px; margin-bottom: 6px; font-size: 14px; display: flex; justify-content: space-between; align-items: center; }
.selected-list button { border: 0; background: transparent; color: #d32f2f; cursor: pointer; font-size: 13px; }
